# JSP

## JSP(Java Server Pages)란?

HTML 문서 안에 자바 코드를 직접 삽입하여 웹 서버에서 동적으로 웹 페이지를 생성하여 브라우저가 구현할 수 있도록 전달해 주는 스크립트 언어[^1]이다.



## JSP 등장배경

초기 웹 프로그램은 서블릿을 이용해서 구현했다.

그런데 인터넷 사용자가 폭발적으로 증가하고 사용자에게 보여주는 화면의 기능이나 구성이 복잡해졌다.

그래서 점차 디자이너가 화면을 구현하는 일을 담당하게 되었는데, 여기서 문제가 발생한다.



기존 서블릿에서 화면을 구현할 때는 서블릿의 응답 기능을 이용했다.

자바 코드를 이용해 HTML 태그를 브라우저로 전송하는 방식이다.

그런데 디자이너는 개발자와 달리 자바 코드에는 익숙하지 않아 화면 기능을 구현할 때 많은 불편함이 생긴다. 

그래서 서블릿의 기능 중 별도로 화면 기능을 디자이너가 작업하기 쉽게 하기 위해 JSP가 등장하게 된 것이다.





## JSP의 내부적인 동작과정

JSP는 HTML, CSS와 자바스크립트는 물론이고 JSP에서 제공하는 여러 가지 구성요소가 화면을 구현하는 데 사용된다.

그러다보니 JSP 파일 자체를 브라우저로 전송하면 브라우저는 JSP 요소들을 인식하지 못한다.

따라서 JSP는 컨테이너에 의해 브라우저로 전송되기 전에 실행 단계를 거쳐야 한다.



1. **변환 단계**: 컨테이너는 JSP파일을 자바 파일로 변환한다.
2. **컴파일 단계**: 컨테이너는 변환된 자바 파일을 클래스 파일로 컴파일한다.
3. **실행 단계**: 컨테이너는 class 파일을 실행하여 그 결과를 브라우저로 전송해 출력한다. 



## JSP 페이지 구성요소

### 디렉티브 태그

#### 페이지 디렉티브 태그

JSP 페이지의 전반적인 정보를 설정할 때 사용

이클립스에 JSP 페이지를 만들면 자동으로 페이지 디렉티브 태그가 생성된다.

```jsp
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
```

| 속성         | 기본값       | 설명                                       |
| ------------ | ------------ | ------------------------------------------ |
| language     | "java"       | JSP 페이지에서 사용할 언어를 지정한다.     |
| contentType  | "text/html"  | JSP 페이지 출력 방식을 지정한다.           |
| pageEncoding | "ISO-8859-1" | JSP에서 사용하는 문자열 인코딩을 지정한다. |



#### 인클루드 디렉티브 태그

공통으로 사용하는 JSP 페이지를 다른 JSP 페이지에 추가할 때 사용

재사용성이 높아질 뿐만 아니라 유지관리도 수월해진다.

```jsp
<%@ include file="공통기능.jsp" %>
```



#### 태그라이브 디렉티브 태그

개발자나 프레임워크에서 제공하는 태그를 사용할 때 사용

#### 예시

custlib 태그 라이브러리에 hello 라는 태그가 포함되어 있다고 가정해보자.

hello 태그를 사용하려면 다음과 같이 코드를 작성하면 된다.

```jsp
<%@ taglib uri = "http://www.example.com/custlib" prefix = "mytag" %>

<html>
   <body>
      <mytag:hello/>
   </body>
</html>
```

uri의 속성값으로는 컨테이너가 인식할 수 있는 라이브러리의 위치를 작성하고, p



### :bulb:URI(Uniform Resource Identifier)과 URL(Uniform Resource Locator)

위의 예시에서 태그라이브 디렉티브 태그의 uri 속성을 볼 수 있다.

예시를 보면 url과 똑같다고 생각할 수도 있지만 uri와 url은 차이가 있다.

결론부터 말하자면 uri은 url의 상위개념이다.



uri는 네트워크 상 자원을 가리키는 일종의 고유 식별자이다.

url은 방금 말했듯이 uri에 포함되는 개념이며 자원의 위치를 의미한다.



### 스크립트 요소

#### 선언문

JSP에서 변수나 메서드를 선언할 때 사용한다.

#### 스크립트릿

`<% %>`

JSP에서 자바 코드를 작성할 때 사용한다.

#### 표현식

JSP에서 변수의 값을 출력할 때 사용한다.

```jsp
<%!
	String name = "영준";
	public String getName(){return name;}
%>
<%--선언문 --%>
...
<body>
    <h1>
        안녕하세요. 제 이름은 <%=name%>입니다.
        <%--표현식 --%>
    </h1>
</body>
```



### 내장 객체

내장 객체란 JSP가 서블릿으로 변환될 때 컨테이너가 자동으로 생성시키는 서블릿 멤버 변수를 말한다.

| 내장 객체   | 설명                                     |
| ----------- | ---------------------------------------- |
| request     | 클라이언트의 요청 정보를 저장한다.       |
| response    | 응답 정보를 저장한다.                    |
| out         | JSP 페이지에서 결과를 출력한다.          |
| session     | 세션 정보를 저장한다.                    |
| application | 컨텍스트 정보를 저장한다.                |
| pageContext | JSP 페이지에 대한 정보를 저장한다.       |
| page        | JSP 페이지의 서블릿 인스턴스를 저장한다. |
| config      | JSP 페이지에 대한 설정 정보를 저장한다.  |
| exception   | 예외 발생 시 예외를 처리한다.            |



### 액션 태그

JSP 등장배경을 설명하며 디자이너들이 HTML 태그에 자바 코드를 같이 써야 하는 문제로 불편함을 겪었다고 했었다.

따라서 JSP는 스크립트릿의 자바 코드를 제거하고 디자이너 입장에서 더 쉽게 사용할 수 있는 액션 태그로 기능을 제공하게 되었다.

| 이름                 | 형식                | 설명                                                         |
| -------------------- | ------------------- | ------------------------------------------------------------ |
| 인클루드 액션 태그   | `<jsp:include>`     | 이미 있는 JSP를 현재 JSP에 포함하는 태그                     |
| 포워드 액션 태그     | `<jsp:forward>`     | 서블릿에서 RequestDispatcher 클래스의 포워딩 기능을 대신하는 태그 |
| 유즈빈 액션 태그     | `<jsp:useBean>`     | 객체를 생성하기 위한 new 연산자를 대신하는 태그              |
| 셋프로퍼티 액션 태그 | `<jsp:setProperty>` | setter를 대신하는 태그                                       |
| 겟프로퍼티 액션 태그 | `<jsp:getProperty>` | getter를 대신하는 태그                                       |



### 커스텀 태그

개발자가 직접 만드는 태그로 태그라이브 디렉티브 태그를 통해 사용한다.



[^1]: HTML 문서 안에 직접 프로그래밍 언어를 삽입하여 사용하는 것으로, 기계어로 컴파일되지 않고 별도의 변역기가 소스를 분석하여 동작하게 하는 언어



# :books:참고자료

- https://gmlwjd9405.github.io/2018/11/03/jsp.html

- https://www.tutorialspoint.com/jsp/index.htm

- https://programming119.tistory.com/194

- 이병승, 자바 웹을 다루는 기술, 도서출판 길벗, 2019


