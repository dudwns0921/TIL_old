# 개발 생산성을 높여주는 도구

개발에 처음 입문했을 당시,  노마드코더 강의 영상을 통해 Prettier라는 도구에 대해 알게 되었다. 당시에 코린이었던 나에게는 정말 신세계에 들어서는 듯한 경험이었다. 의미없이 탭을 누르고, 스페이스바를 누르던 지겨운 반복작업에서 벗어날 수 있다니!

Prettier를 잘 쓰고 있던 도중, 실무에서는 Eslint와 Prettier를 함께 쓴다는 이야기를 듣게 되었다. 이번에는 두 도구에 대해 좀 더 자세히 알아보고 어떻게 적용시키는지 정리해보려고 한다.

두 도구를 함께 쓰는 이유에 대해 여러 글들을 찾아봤지만 아래 한 문장이 그 이유를 명확하게 정리해준다고 생각한다. 

> ***"eslint는 코드 퀄리티를 보장하도록 도와주고, prettier는 코드 스타일을 깔끔하게 혹은 통일되도록 도와준다."***

[ESLint, Prettier Setting, 헤매지 말고 정확히 알고 설정하자. :: 이뇽의세상](https://helloinyong.tistory.com/325)

아직 이해가 어렵다면 두 도구에 대해 좀 더 알아보면서 위 문장을 이해해보자.

## ESLint 소개

린트(ESLint)는 잘못된 코드 스타일로 인해 에러가 나지 않게 코드 문법을 잡아주는 문법 검사기이다. 문장 뒤에 자동으로 세미콜론, 콤마를 붙여주기도 하고 의미 없는 변수, API 사용에 대해 경고해주는 등 여러 문법 오류에 대해서 미리 알려준다. 가급적 덜 에러가 나는 코드를 작성하면 자연스럽게 버그도 줄어들기 때문에 서비스 품질을 높이는데도 도움이 된다.

## Prettier

프리티어(Prettier)는 코드 스타일을 정리해주는 도구이다. VSCode, Atom, Sublime 등 대중적인 텍스트 편집기에서 이미 플러그인 형태로 지원하고 있으며 VSCode에서는 아래와 같이 확장 플러그인으로 설치할 수 있다.

그러니까 ESLint가 에러가 발생하지 않도록 문법을 잡아준다면, Prettier는 이름 그대로 이쁜 코드를 작성하는 걸 도와주는 도구이다. 두 가지를 함께 쓴다면 에러를 미연에 방지할 수 있을 뿐만 아니라 깔끔하고 이쁘기까지 한 코드를 작성할 수 있게 되는 것이다. 

## 프로젝트에 적용하기

### Prettier 적용하기

먼저 플러그인 형태로 Prettier를 적용하는 방법에 대해서 알아보겠다. 먼저 Extensions에 들어가 Prettier을 검색하고 설치해준다.

```json
{
  "editor.defaultFormatter": "esbenp.prettier-vscode"
  "editor.formatOnSave": true,
  "editor.formatOnType": true,
}
```

그 다음에 사용자 설정 파일인 settings.json 파일에다가 위 코드를 작성해준다. 

먼저 기본 포매터를 Prettier로 설정해준다. 그 다음에 코드를 작성하고 저장 버튼을 눌렀을 때 자동으로 코드를 정리하도록 두 속성을 정의해준다.

![](C:\Users\220307\AppData\Roaming\marktext\images\2022-03-31-10-59-56-image.png)

사용자 설정 파일은 윈도우 기준으로 Ctrl+, 을 눌러 Settings 창을 띄운 후 오른쪽 맨 위에 보이는 문서 모양 아이콘을 선택해서 들어갈 수 있다.

그리고 프로젝트 안에다가 .prettierrc 파일을 만들고 그 안에다가 본인이 설정하고 싶은 옵션들을 정의해준다. 

```json
{
  "singleQuote": true,
  "semi": true,
  "useTabs": false,
  "tabWidth": 2,
  "trailingComma": "all",
  "printWidth": 80
}
```

이렇게 플러그인으로 간단하게 코드를 정리할 수도 있지만 많은 개발자분들이 ESLint와 결합하여 프로젝트 설정 파일로 관리하는 것을 추천한다. 왜냐하면 설정 파일로 관리하게 되면 팀원들이 더욱 손쉽게 똑같은 환경에서 작업할 수 있기 때문이다.

### Vue 프로젝트에 ESLint와 Prettier 적용하기

일단 Vue CLI 3.x 버전에서는 프로젝트를 생성할 때 ESLint와 Prettier를 추가할 수 있다.

1. Manually select features

2. Babel, Linter

3. ESLint+Prettier

4. Lint on save

저장할 때마다 Lint를 설정, 그러니까 문법 검사를 하겠다는 것이다.

5. In dedicated config files

환경 설정에 관한 파일들을 독립적으로 만들겠다는 옵션이다.

각각의 옵션을 위와 같이 설정해주고, 프로젝트가 생성되었으면 생성된 파일들을 아래와 같이 수정해주자.

```javascript
// vue.config.js

const { defineConfig } = require("@vue/cli-service");
module.exports = defineConfig({
  devServer: {
    client: {
      overlay: false,
    },
  },
  transpileDependencies: true,
});
```

 overlay 설정을 false로 하는 이유는 Vue CLI 3.x 대로 생성한 프로젝트들부터 ESLint의 오류가 화면을 덮게 되는 현상을 해결하기 위해서이다.

사실 ESLint는 에러가 나지 않는 방향으로 코드를 작성할 수 있도록 도와주는 도구일뿐 애플리케이션의 실행에는 영향이 없다. 따라서 실행에는 아무런 영향이 없음에도 무조건적으로 ESLint의 오류를 해결해야 하기 때문에 생산성이 떨어지게 될 것이다. 

```javascript
// eslintrc.js
...
  rules: {
    'no-console': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'no-debugger': process.env.NODE_ENV === 'production' ? 'warn' : 'off',
    'prettier/prettier': [
      'error',
      {
        singleQuote: true, // 싱글 쿼테이션 사용 여부
        semi: true, // 세미 콜론 사용 여부
        useTabs: false, // 탭 사용 여부
        tabWidth: 2, // 탭 너비
        trailingComma: 'all', // 여러 줄을 사용할 때, 후행 콤마 사용 방식
        printWidth: 80, // 줄 바꿈 할 폭 길이
        bracketSpacing: true, // 객체에서 괄호에 공백 삽입 여부
        arrowParens: 'avoid', // 화살표 함수 괄호 사용 방식
      },
    ],
  },
...
```

위는 Prettier 설정을 ESLint 설정 파일에 함께 작성한 모습이다. 이렇게 같은 설정 파일에 작성을 해주는 이유는 Vue CLI로 프로젝트를 생성할 때 ESLint+Prettier 세팅으로 만들었기 때문에 .prettierc 파일에 개별적으로 설정을 하게 되면 충돌이 일어날 수 있다. Prettier에 대한 설정은 개인적인 취향에 달린 것이기 때문에 원하는 대로 수정하면 된다.

ESLint의 로그 레벨이 off, warn, error 정도가 있는데,  위와 같이 설정해주게 되면 Prettier 설정에 어긋나는 코드들에 대해 모두 error를 띄우겠다는 의미이다.

## :bulb:Tip

### 로깅

정보를 제공하는 일련의 기록인 로그를 생성하도록 시스템을 작성하는 활동을 의미한다.

### 로그 레벨

1. trace : debug 보다 세분화된 정보

2. debug: 디버깅하는데 유용한 세분화된 정보

3. info: 상태 변경과 같은 정보성 메시지

4. warn: 오류는 아니지만 잠재적인 오류 원인이 될 수 있는 경고성 정보

5. error: 요청을 처리하는 중 문제가 발생한 경우

6. fatal : 아주 심각한 에러가 발생한 상태, 시스템적으로 심각한 문제가 발생해서 어플리케이션 작동이 불가능할 경우  

```json
// settings.json

{
  "editor.formatOnSave": false,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
...
  "eslint.validate": [
    {
      "language": "vue",
      "autoFix": true
    },
    {
      "language": "javascript",
      "autoFix": true
    },
    {
      "language": "javascriptreact",
      "autoFix": true
    },
    {
      "language": "typescript",
      "autoFix": true
    },
    {
      "language": "typescriptreact",
      "autoFix": true
    }
  ],
...
```

위 파일은 설정 파일로 Ctrl+, 후 오른쪽 위의 문서 모양의 아이콘을 통해서 확인할 수 있다.

formatOnSave를 false로 두는 이유는 Prettier가 아닌 ESLint의 설정에 따라 수정이 이루어지도록 하기 위함이다. Prettier을 함께 사용하고 있기 때문에 formatOnSave 속성을 true로 두게 되면 저장할 때마다 Prettier 설정에 맞게 코드를 수정하게 된다. 하지만 우리는 ESLint 파일에 프리티어 설정을 작성했기 때문에 ESLint 설정에 맞게 수정이 이루어져야 한다. 그리고 source.fixAll.eslint 코드를 추가해 저장할 때마다 ESLint의 설정에 맞게 수정이 이루어지도록 하자. 마지막으로 eslint.validate 속성을 위와 같이 정의해주면 저장할 때 ESLint가 해당 파일들에 대해 자동으로 수정한다.

# :books:참고자료

https://joshua1988.github.io/web-development/vuejs/boost-productivity/

 [ESLint, Prettier Setting, 헤매지 말고 정확히 알고 설정하자. :: 이뇽의세상](https://helloinyong.tistory.com/325)

[[Log] 로깅의 개념과 다양한 로그 라이브러리, 그리고 주의사항](https://ahndding.tistory.com/12)
