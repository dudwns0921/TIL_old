# 인터넷 활용

# 1. 네트워크 개념

# 1-1. 통신망 종류

- LAN(Local Area Network) : 근거리 통신망, 집/사무실 등 가까운 지역은 묶는 소규모 네트워크

Ethernet : 매체 접근 기술 CSMA/CD 사용

Token Ring / IEEE 802.5 LAN : 매체 접근 제어 기술 Token passing 사용

- MAN(Metropolitan Area Network) : 도시권 통신, 도시 하나 정도의 범위

DQDB는 MAN에서 사용되는 IEEE 802.6 규격인 QPSX의 제어접속에 사용된다. 

- WAN(Wide Area Network) : 광역 통신, MAN이 모여서 만들어진 것, 국가/대륙과 같은 넓은 범위

장거리 망 사이의 연결을 위한 WAN 구성 방식으로는 전용선, 회선교환망, 패킷교환망이 있다.

패킷교환망 방식 : X.25 (가변 길이 프레임 전송을 지원하는 프레임릴레이의 근간을 이룸)

- SAN : 저장 영역 네트워크, 원격 컴퓨터 기억장치를 서버에 부착하는 구조



# 1-2. OSI 7 Layer

| No   | OSI 7 모델      | 기능                                                         | TCP/IP 모델          |
| ---- | --------------- | ------------------------------------------------------------ | -------------------- |
| 7    | 응용 계층       | 사용자에게 다양한 네트워크 서비스를 제공하기 위해 User Interface를 제공, UI로 데이터를 생성 | 응용계층             |
| 6    | 표현 계층       | 부호화, 압축, 암호화                                         | 응용계층             |
| 5    | 세션 계층       | 종단 간 애플리케이션들의 연결 설정, 유지, 해제               | 응용계층             |
| 4    | 전송 계층       | 종단 간 연결, 응용 계층 사이에 논리적인 통로 제공            | 전송 계층            |
| 3    | 네트워크 계층   | 논리적인 주소를 사용<br />경로 관리, 최적 경로 설정          | 인터넷 계층          |
| 2    | 데이터링크 계층 | 데이터 전송을 위한 형식 설정<br />데이터 전송을 위하여 Media에 접근하는 방법 제공<br />오류 검출 기능 제공 | 네트워크 엑세스 계층 |
| 1    | 물리 계층       | 물리적인 연결, 전기적, 기계적, 기능적 절차적인 수단 제공     | 네트워크 엑세스 계층 |



응용 계층 : HTTP, NFS, SSH

데이터링크 계층 : 이더넷, 토큰링

네트워크 계층 : ICMP, ARP

전송 계층 : TCP, UDP



TCP

연결지향 전송 프로토콜이다.

TCP가 UDP에 비해 안정성과 신뢰성이 뛰어나다

UDP가 TCP에 비해 전송 속도는 빠르다

TCP는 ACK 패킷을 주고받으면서 전송 여부를 확인한다.



3-Way Handshaking

TCP 클라이언트와 서버 간에 신뢰성 있는 데이터를 전송하기 위해 데이터를 전송하기 전 통신을 개시할 것을 상호 확인하는 과정이다.

| 이름         | 설명                                                         |
| ------------ | ------------------------------------------------------------ |
| LISTEN       | 서버에서 클라이너트로부터 들어오는 패킷을 위해 소켓을 열고 기다리는 상태 |
| SYN_SENT     | 로컬에서 원격으로 연결 요청(SYN 신호를 보냄)을 시도한 상태   |
| SYN_RECEIVED | 서버 시스템이 원격 클라이언트로부터 접속을 요구 받아 클라이언트에게 응답했지만, 아직 클라이언트에게 확인 메시지를 받지 않은 상태 |
| ESTABLISHED  | 서버와 클라이언트가 연결된 상태                              |

패킷 교환 순서 : SYN -> ACK/SYN ->ACK

# 1-3. 네트워크 개요

- 토폴로지 : 호스트 및 장비들의 물리적인 배치 형태 

| 종류       | 설명                                                         |
| ---------- | ------------------------------------------------------------ |
| 성형(star) | 중앙 컴퓨터에 여러 대의 컴퓨터가 허브 또는 스위치와 같은 장비로 연결<br />관리하는 중앙 컴퓨터 고장 시 전체 네트워크 사용이 불가능 |
| 망형       | 모든 노드가 서로 일대일로 연결된 형태<br />장애 발생 시 다른 시스템에 영향이 적고 우회할 수 있는 경로가 존재하여 가장 신뢰성이 높은 방식 |
| 버스형     | 하나의 통신회선에 여러 컴퓨터를 연결해서 전송<br />연결된 컴퓨터 수에 따라 네트워크 성능이 변동 |
| 링형       | 각 노드가 좌우의 인접한 노드와 연결되어 원형을 이룬 형태<br />논리적인 순환형 토폴로지로 하나의 노드장애가 전체 토폴로지에 영향<br />토큰패싱이라는 방법을 통해 데이터 전송 |
| 트리형     | 버스형과 성형 토폴로지의 확장 형태                           |



# 1-4. 프로토콜 구성 요소

프로토콜은 특정 통신 기능을 수행하기 위한 규악이다.

- 구문 : 데이터 형식, 부호화 및 신호 레벨 등

- 의미 : 전송의 조작이나 오류 제어를 위한 제어 정보에 대한 규정
- 순서 : 속도 일치 및 순서 제어이다.

| 기능       | 설명                                                         |
| ---------- | ------------------------------------------------------------ |
| 멀티플렉싱 | 하나의 통신 선로에서 다중 시스템이 동시에 통신할 수 있는 기법 |
| 흐름제어   | 송신 속도가 수신측의 데이터 처리능력을 초과하지 않도록 하는 것 |
| 캡슐화     | 송신자와 수신자의 주소, 오류 검출 코드, 프로토콜 제어 정보를 덧붙이는 것 |
| 오류제어   | 데이터 전송 중 발생되는 에러를 검출, 보정하는 메커니즘       |





# 1-5. 네트워크 장비

LAN 구성 장비

- 리피터 : 신호의 재생 및 증폭기능을 수행하여 물리적인 거리를 확장시키는 장비
- 브리지 : 주소에 따라 목적지 포트로 프레임을 전달하는 장비
- X.25 : 패킷망에서 가변 길이 프레임 전송하는 장비

인터네트워킹 장비

- 라우터 : OSI 모델의 물리계층, 데이터 링크 계층, 네트워크 계층의 기능을 지원하는 장치

다른 기종 망을 연결하는 중계 장비로 연동할 망의 형태에 따라 모듈을 구매하여 프로토콜을 정착해야 한다.

- 게이트웨이 : 서로 다른 통신망이나 프로토콜을 사용하는 네트워크 간의 통신을 가능하게 하는 장비를 통칭한다.



# 1-6. UTP 케이블링

- 다이렉트 케이블

양쪽을 EIA/TIA 568-B 표준 연결

- 크로스오버 케이블

한쪽은 EIA/TIA 568-B, 다른 한 쪽은 568-A 연결

568-B 케이블선 규격

| 빗금 주황 | 주황 | 빗금 녹색 | 파랑 | 빗금 파랑 | 녹색 | 빗금 갈색 | 갈색 |
| --------- | ---- | --------- | ---- | --------- | ---- | --------- | ---- |

실제 사용되는 선은 빗금 주황, 주황, 빗금 녹색, 녹색 선이다.



# 1-7. IP주소와 도메인

- IPv4 주소체계

IP 주소는 특수한 번호로 각 컴퓨터마다 고유한 값으로 제공한다.

첫 4비트 영역의 값에 따라 총 5개의 클래스로 나뉜다.

32비트의 이진 숫자로 구성된다.

0.0.0.0~255.255.255.255 사이의 값을 갖는다.

| 이름              | 설명                                                         |
| :---------------- | :----------------------------------------------------------- |
| Network           | 호스트 ID의 주소가 모두 0인 주소<br />네트워크를 대표하는 값 |
| Direct Broadcast  | 호스트 ID의 주소가 모두 1인 주소                             |
| Limited Broadcast | 255.255.255.255<br />DHCP 클라이언트가 DHCP 서버를 찾을 경우 사용 |
| Loopback 주소     | 127.0.0.0~127.255.255.255<br />네트워크 부분의 값이 Class A에 속한 127<br />호스트 부분의 값은 지정되지 않은 값 |
| 0.0.0.0           | 부팅 시 자신의 IP 주소를 모를 경우 사용                      |
| 사설 IP 주소      | 공식적인 승인 없이 사용할 수 있는 주소<br />라우팅이 불가능한 주소로 인터넷에서 사용 불가<br />-A : 10.0.0.0~10.255.255.255<br />-B : 172.16.0.0~172.31.255.255<br />-C : 192.168.0.0~192.168.255.255 |

- 클래스별 기본 서브넷 마스크

A 클래스 : 255.0.0.0.0

B 클래스 : 255.255.0.0

C 클래스 : 255.255.255.0



- 

# 1-8. 이더넷 배선 방식

- 1000BASE-T

1000Mbps의 전송속도에 전송매체는 UTP-5

전송 거리는 100m

- 1000BASE-LX

단파장의 광섬유 사용 규격, 1000Mbs

전송 거리는 모드에 따라 달라짐 / 62.5멀티모드 - 440m, 50 멀티모드 - 550m, 9 싱글 모드 - 5km

- 1000BASE-SX : 단파장 광섬유 사용하는 규격

62.5 멀티모드 - 275m, 50 멀티모드 - 550m

- 100BASE-FX

100Mbps의 전송속도, 전송매체는 광섬유 케이블

전송 거리 400m



# 1-9. Tip

- 데이터 전송방식

| 종류         | 설명                                                         |
| ------------ | ------------------------------------------------------------ |
| 유니캐스트   | 하나의 송신지가 하나의 수신자에게 데이터 전송                |
| 멀티캐스트   | 다중 송신자와 다중 수신자 간의 데이터 전송 방식              |
| 브로드캐스트 | 하나의 송신자가 불특정 다수의 수신자들 간의 데이터 전송 방식 |
| 애니캐스트   | 하나의 송신자가 특정 다수의 수신자들 중에서 인접한 하나의 수신자를 선택해 전송하는 방식 |

- 패킷 교환방식

네트워크를 사용해서 전송하기 위해서 일정한 단위로 나눈 데이터 전송 단위를 패킷이라고 한다.

패킷 교환은 송수신지 간의 콜 설정에 대한 오버헤드가 존재한다는 단점이 있다. 



- TCP/IP

IP 주소 체계를 따르고 IP Routing을 이용해 TCP의 특성을 활용해 송신자와 수신자의 논리적 연결을 생성하고 신뢰성을 유지할 수 있도록 하겠다는 것을 의미

각 머신은 서로 구별할 수 있또록 32바이트 숫자인 IP주소가 부여되어있다.  



- netstat 명령어

-a : 모든 접속과 수신 중인 포트

-n : IP 주소와 포트번호

-p : 지정된 프로토콜의 통계치를 나타낸다.



# 인터넷 서비스 종류

- www

분산 클라이언트-서버 모델을 기반

클라이언트는 HTML 전송 요청은 가능하나 수정은 불가능

하이퍼텍스트와 하이퍼미디어의 개념을 사용

분산된 자원 처리를 목적으로 CERN에서 시작됨

표준 웹 프로토콜을 기반으로 하여 서로 다른 개발 환경과 운영체제에서도 상호 통신 가능

- 메일 서비스

사용하는 프로토콜

SMTP(송신)

POP3 또는 IMAP4 (수신)

- FTP 서비스

portmap이 먼저 수행되어 있어야만 서비스 실행 가능 / NIS, NFS, PRC 연결에 관여하는 데몬

rpcbind는 시스템에서 RPC 서비스를 관리

TCP/IP에 의해 제공되는 호스트 간의 파일 복사를 위한 프로토콜

20번과 21번 포트 번호를 사용

| 명령어 | 설명                                    |
| ------ | --------------------------------------- |
| mget   | 로컬 시스템에 여러 개의 파일을 가져온다 |
| hash   | 파일 전송할 때 진행 상태를 #로 표시     |
| bi     | 파일 전송 모드를 바이너리 모드로 변경   |
| ls     | 디렉터리의 리스트를 출력                |
| delete | 서버 접속된 상태에서 파일을 삭제        |

- NFS

네트워크 기반에 다른 시스템과 파일 시스템을 공유하기 위한 클라이언트/서버 프로그램이다.

- RPC



# 2-1.DNS 서비스

호스트 이름을 기반으로 IP 주소로 변환하거나 IP주소를 기반으로 호스트 이름을 변환시켜 주는 프로토콜

- /etc/hosts : IP 주소와 호스트명을 매핑시켜 DNS 기능을 제공
- DNS 설정 정보 확인 : nslookup, dig

| 최상위 도메인 | 설명                               |
| ------------- | ---------------------------------- |
| org           | 비영리기관                         |
| net           | 네트워크기관                       |
| com           | 영리를 목적으로 하는 기관          |
| edu           | 교육기관                           |
| gov           | 정부기관                           |
| mil           | 군사기관                           |
| int           | 국제 조약 등으로 만들어진 국제기관 |
| kt, ip, fr    | 국가기관                           |



# 2-2. Telnet

네트워크상에 있는 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령 실행, 파일 복사 등을 가능하게 해주는 서비스

- 관련 메시지 파일

/etc/motd : 내부/외부 접속시 로그인 후 출력

/etc/issue : 내부 접속시 로그인 전 출력

/etc/issue.net : 외부 접속시 로그인 전 출력

다른 계정 전환 방법 : telnet -l 계정ID 서버IP

명령어 telnet을 이용하여 특정 인터넷 서비스의 활성화 상태를 확인할 수 있음



# 2-3. SSH

네트워크상에 있는 다른 컴퓨터에 로그인하거나 원격 시스템에서 명령 실행, 파일 복사 등을 가능하게 해주는 서비스

- ssh -p 180.192.168.1.1

-p 포트, IP 주소

- 계정명 기반 접속 : ssh -l 아이디 서버IP주소 또는 ssh 아이디@IP주소 [명령어]
- anonymous 계정의 접속을 허용하지 않음
- 인증파일 경로 : /home/[USER_ID]/.ssh/authorized_keys



# 2-4. 기관관련

- IANA : ICANN이 등장하기 전에 IP 주소 및 도메인을 관리한 기관
- ISO : 국제적인 표준화 기구
- CCITT : 국제 전신전화 자문위원회
- ITU-T : 국제 전기통신연합 전기통신 표준화 부문은 통신 분야의 표준 책정



# 2-5. 기타

- Gopher : 인터넷 기반의 문서 검색 시스템으로 텍스트 기반의 메뉴 인터페이스를 통해 정보 검색 기능을 제공
- Usenet : 텍스트 형태의 기사들을 사용자들이 공개된 공간에서 주고받아 토론할 수 있게 고안된 분산 네트워크
- Newgroup : 인터넷 사이트 특정 주제에 관해 짧은 글들을 올려서 서로 토론할 수 있게 만들어진 인터넷 서비스
- IRC : 실시간 인터넷 채팅 프로토콜
- Opera : 탭 브라우저 기능과 웹 페이지를 네모난 썸네일 형태로 가지런히 배열하는 스피드 다이러을 최초로 선보인 웹 브라우저
- SAMBA

윈도우 PC에서 리눅스 서버에 접속하여 파일이나 프린터를 공유하는 서비스로 SMB 또는 CIFS 프로토콜을 이용



# 인터넷 서비스의 설정

# 3-1. 네트워크 인터페이스 설정

| 인터페이스명 | 설명                                            |
| ------------ | ----------------------------------------------- |
| lo           | 루프백 인터페이스                               |
| eth          | 이더넷 인터페이스, 인터페이스 번호는 0부터 시작 |
| ppp          | PPP 인터페이스                                  |
| dl           | D-Link-D-600 포켓 어댑터 시리즈의 인터페이스    |
| plip         | 병렬 라인 인터페이스                            |
| sl           | SLIP 인터페이스                                 |

일반적으로 네트워크 인터페이스는 자동으로 인식되지만 그러지 않을 경우 수동으로 설정해야 한다.

수동으로 설정한다는 것은 컴파일된 인터페이스 모듈을 커널에 적재하는 것인데 수동 적재 방법과 자동 적재 방법이 있다.

| 방법 | 설명                                                         |
| ---- | ------------------------------------------------------------ |
| 수동 | /sbin/lsmod : 현재 적재되어 있는 모듈 정보 확인<br />/sbin/insmod : 적재하고자 하는 모듈을 삽입<br />/sbin/rmmod : 현재 적재되어 있는 모든 모듈을 제거<br />/sbin/modprobe : 모듈의 적재 및 제거 |
| 자동 | 부팅 시 자동으로 적재할 정보가 담긴  파일의 정보를 읽어오게 함<br />자동 적재 모듈 파일명 : /etc/modprobe.conf |



# 3-2. 네트워크 설정 파일

- /etc/sysconfig/network : 네트워크의 기본 정보가 설정되어 있는 파일이다.
- /etc/sysconfig/network-scripts/ifcg-ethX : 지정된 네트워크 인터페이스의 네트워크 환경 설정 정보가 저장된다.

X에는 이더넷 카드 번호가 들어간다.

- /etc/resolv.conf : 기본적으로 사용할 도메인명과 네임서버를 설정한다.
- /etc/hosts : IP 주소와 도메인 주소를 1:1로 등록하여 도메인에 대한 IP 주소를 조회하도록 한다.
- /etc/host.conf : DNS 서비스를 제공할 때 먼저 이 파일을 검사하여 파일의 설정에 따라 서비스한다. 



# 3-3. 네트워크 설정

인터페이스 인식 후에는 네트워크 설정 파일과 관련 명령어들을 이용하여 TCP/IP 관련 설정을 한다.

- IP 주소 설정

네트워크 설정 파일로 주소 설정

명령어를 이용한 주소 설정



유틸리티를 이용한 주소 설정

nmtui, gnome-control-center 등의 다양한 유틸리티 활용해서 주소 할당

X윈도 그래픽 모드에서는 gnome-control-center와 nm-connection-editor을 이용해 네트워크 설정



- 라우팅 테이블 설정 및 관리

목적지 경로가 라우팅 테이블에 없다면 디폴트 게이트웨이로 트래픽을 전송할 수 있게 라우팅 테이블 설정 가능

route add default gw <GW> dev <인터페이스명>



# 3-3. 네트워크 관련 명령어

- ifconfig : 네트워크 인터페이스 구성을 위한 설정 확인

ifconfig eth0 192.168.10.30 netmask 255.255.255.0 up

down으로 비활성화시킬 수 있다.

- ip

ip addr add 192.168.0.109/24 dev eth1

지정된 인터페이스에 IP주소를 지정할 경우에 사용

- ping : 특정 호스트 또는 네트워크 장비까지 통신 가능 여부 점검(ICMP 기반)
- traceroute : 어떤 통신 경로를 걸쳐 패킷이 전달되는지 확인
- route : 라우팅 테이블 확인

라우팅 경로 확인하거나 변경할 때 사용

- nslookup : 인터넷 도메인 네임서버에게 특정 호스트에 대한 정보 질의(대화식 명령어)
- mii-tool : 네트워크 인터페이스 상태(속도와 전송모드 등) 을 점검하고 설정하는 명령
- ethtool : 이더넷카드의 설정정보를 출력하거나 변경, 네트워크 인터페이스의 물리적 연결 여부 확인
- arp : 시스템이 가지고 있는 arp 테이블을 확인하고 추가 / 삭제

로컬 네트워크상에 있는 다른 시스템의 MAC 주소 확인할 때 사용

-a : arp 캐시 정보 확인



# 3-4. netstat

- 네트워크 연결 상태를 확인할 수 있는 명령어
- 옵션을 이용하면 수신 중인 포트번호, IP 주소, 라우팅 테이블 등도 확인 가능
