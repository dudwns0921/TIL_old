# CSS-in-CSS Vs CSS-in-JS

 최근에 이전에 만들었던 프로젝트를 리팩토링하면서 스타일 구성 방법을 CSS 모듈에서 스타일 컴포넌트로 바꾸었다. 솔직히 말하자면 스타일 컴포넌트로 바꾸는 데 프로젝트의 성격, 성능 등 합리적인 이유가 있지는 않았다. ''그냥 다들 쓰니까...'' 가 가장 큰 이유였다고 생각한다.그래서 스타일 구성 방법에는 어떠한 것들이 있으며, 현재 리팩토링 과정에 스타일 컴포넌트를 쓰는 게 올바른 선택이었는지 판단해보고자 한다.



## 🕰CSS 역사

 1996년 처음으로 CSS가 발표되었다. 하지만 웹이 점점 복잡해지고 동적 기능 요구가 증가하면서 HTML과 CSS만으로는 화면의 모든 스타일을 제어할 수 없는 상황에 이르게 된다. 이를 해결하기 위한 여러 가지 웹 애플리케이션 스타일 구성 방식이 나타났으며 크게 CSS-in-CSS와 CSS-in-JS로 나뉘게 된다.



## 💡CSS-in-CSS

### CSS 모듈

 CSS 모듈은 CSS를 모듈화 하여 사용하는 방식이다. CSS 클래스를 만들면 자동으로 고유한 클래스네임을 만들어서 scope를 지역적으로 제한한다. 모듈화된 CSS를 번들러로 불러오면 다음과 같이 사용자가 정의했던 클래스네임과 고유한 클래스네임으로 이뤄진 객체가 반환된다.  

 이처럼 CSS 모듈은 동일 프로젝트 소스 안에 CSS 클래스 이름이 중복되어도 새로운 이름이 입혀져 중복 및 관리의 위험성이 적고 CSS 네이밍 규칙이 간소화 된다. 다만 한 곳에서 모든 것을 작성하지 않기 때문에 별도로 많은 CSS 파일을 만들어 관리해야 하는 단점이 있다.



### CSS 전처리기(Preprocessor)

 자신만의 특별한 구문(Syntax)을 가지고 CSS를 생성하는 프로그램이다. CSS의 문제점을 프로그래밍 방식, 즉 변수·함수·상속 등 일반적인 프로그래밍 개념을 사용하여 보완한다. CSS 전처리기에는 다양한 모듈이 존재하는데 그 중에서도 Sass·Less·Stylus가 가장 많이 사용된다.

 CSS 전처리기는 공통 요소 또는 반복적인 항목을 변수 또는 함수로 대체할 수 있는 재사용성, 임의 함수 및 내장 함수로 인해 개발 시간과 비용 절약, 중첩·상속과 같은 요소로 인해 구조화된 코드 유지 및 관리 용이 등의 장점이 있다. 반면 전처리기를 위한 도구가 필요하고 다시 컴파일하는데 시간이 소요된다는 단점도 존재한다.



## 💡CSS-in-JS

 CSS-in-JS는 단어 그대로 자바스크립트 코드에서 CSS를 작성하는 방식을 말한다. 2014년 페이스북 개발자인 Christopher Chedeau aka Vjeux가 처음 소개했다. 이 중 가장 대표적인 CSS-in-JS 라이브러리인 Styled Components를 살펴보자

 Styled Components는 CSS-in-JS 스타일링을 위한 프레임워크이다. 자바스크립트의 태그가 지정된 템플릿 리터럴과 CSS의 기능을 사용하여 구성 요소에 반응하는 스타일을 제공한다. 장점은 다음과 같다.

- CSS 모델을 문서 레벨이 아닌 컴포넌트 레벨로 추상화하는 모듈성
- CSS-in-JS는 JavaScript 환경을 최대한 활용
- 자바스크립트와 CSS 사이의 상수와 함수를 공유
- 현재 사용 중인 스타일만 DOM에 포함
- 짧은 길이의 유니크 한 클래스를 자동으로 생성하는 코드 경량화

 단점으로는 러닝 커브(Learning Curve), 새로운 의존성 발생, 별도의 라이브러리 설치에 따른 번들 크기 증대 및 CSS-in-CSS에 비해 느린 속도 등을 들 수 있다.



## 리팩토링 결과

### 장점

- 수십 개의 CSS 모듈 파일을 정리

- 커스텀 컴포넌트의 사용으로 코드를 좀 더 직관적으로 이해 가능



### 단점

- 속도의 저하

위에서도 이야기했던 단점이지만, CSS 모듈 같은 경우 모든 상태에 맞는 스타일을 만들어두기 떄문에 컴포넌트의 상태가 변경된다 해도 바로바로 적용이 가능하다. 하지만 CSS-in-JS 같은 경우 상태가 변경되면 우선 자바스크립트 파일의 CSS 코드를 읽어와서 파싱하는 단계부터 시작하기 때문에 늦어질 수밖에 없다.

- 번들 크기 커짐

Styled-Component 라이브러리를 추가적으로 설치해서 번들 크기가 커졌다.



 만약 애플리케이션을 유저들이 실제로 사용하고 있었다면 퍼포먼스적인 측면에서 저하가 있었기 때문에 올바른 리팩토링이라고 보기는 힘들 것이다.

 다만 배운 것들을 실제로 적용시켜보려고 만든 애플리케이션이기에 최신 기술을 적용시켜보고 좀 더 클린한 코드를 작성하게 되었다는 점에서 어느 정도 의미가 있는 리팩토링이었다고 생각한다.



# :books:참고자료

- https://s-core.co.kr/insight/view/%EC%9B%B9-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%8A%A4%ED%83%80%EC%9D%BC%EB%A7%81-%EA%B4%80%EB%A6%AC-css-in-js-vs-css-in-css/

- [CSS-In-JS Vs Traditional CSS — Which Should You Use? - CB Insights Research](https://www.cbinsights.com/research/team-blog/css-in-js-traditional-css/)
